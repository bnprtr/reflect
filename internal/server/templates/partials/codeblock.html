<div class="relative">
  <button
    onclick="copyCodeToClipboard(this, this.nextElementSibling.querySelector('code'))"
    class="absolute top-2 right-2 inline-flex items-center px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200 z-10">
    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
    </svg>
    Copy
  </button>
  <div class="code-block">
    <pre><code>{{.Code}}</code></pre>
  </div>
</div>

<script>
function copyCodeToClipboard(button, codeElement) {
  if (!codeElement) {
    codeElement = button.nextElementSibling.querySelector('code');
  }

  if (!codeElement) {
    console.error('Code element not found');
    return;
  }

  const text = codeElement.textContent;
  navigator.clipboard.writeText(text).then(function() {
    const originalHTML = button.innerHTML;
    button.innerHTML = '<svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16 10c0 .553-.447 1-1 1H4c-.553 0-1-.447-1-1s.447-1 1-1h11c.553 0 1 .447 1 1z" fill-rule="evenodd"></path><path d="M10 3c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7zm3.707 7.707l-2.414 2.414a1 1 0 11-1.414-1.414l2.828-2.828a1 1 0 011.414 0l2.828 2.828a1 1 0 11-1.414 1.414L13.707 10.293z" fill-rule="evenodd"></path></svg>Copied!';
    setTimeout(function() {
      button.innerHTML = originalHTML;
    }, 2000);
  }).catch(function(err) {
    console.error('Failed to copy text: ', err);
  });
}
</script>
