@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light mode colors - use theme variables with fallbacks */
    --color-bg: var(--color-bg-light, #f9fafb);
    --color-surface: var(--color-surface-light, #ffffff);
    --color-primary: var(--color-primary-light, #111827);
    --color-secondary: var(--color-secondary-light, #6b7280);
    --color-text: var(--color-text-light, #111827);
    --color-text-secondary: var(--color-text-secondary-light, #6b7280);
    --color-border: var(--color-border-light, #e5e7eb);
    --color-accent: var(--color-accent-light, #2563eb);
    --color-accent-hover: var(--color-accent-hover-light, #1d4ed8);
    --color-shadow: var(--color-shadow-light, rgba(0, 0, 0, 0.1));

    /* Typography - use theme variables with fallbacks */
    --font-family: var(--font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    --font-family-mono: var(--font-family-mono, 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace);
    --font-size-base: var(--font-size-base, 16px);
    --line-height: var(--line-height, 1.6);

    /* Spacing - use theme variables with fallbacks */
    --header-height: var(--header-height, 4rem);
    --content-padding: var(--content-padding, 2rem);
    --card-padding: var(--card-padding, 1.5rem);

    /* Components - use theme variables with fallbacks */
    --header-shadow: var(--header-shadow, 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06));
    --card-shadow: var(--card-shadow, 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06));
    --card-radius: var(--card-radius, 0.5rem);
    --border-width: var(--border-width, 1px);
  }

  .dark {
    /* Dark mode colors - use theme variables with fallbacks */
    --color-bg: var(--color-bg-dark, #0f172a);
    --color-surface: var(--color-surface-dark, #1e293b);
    --color-primary: var(--color-primary-dark, #f1f5f9);
    --color-secondary: var(--color-secondary-dark, #94a3b8);
    --color-text: var(--color-text-dark, #f1f5f9);
    --color-text-secondary: var(--color-text-secondary-dark, #94a3b8);
    --color-border: var(--color-border-dark, #334155);
    --color-accent: var(--color-accent-dark, #3b82f6);
    --color-accent-hover: var(--color-accent-hover-dark, #60a5fa);
    --color-shadow: var(--color-shadow-dark, rgba(0, 0, 0, 0.5));
  }

  html {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    line-height: var(--line-height);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    font-feature-settings: "kern" 1, "liga" 1;
  }

  code, pre {
    font-family: var(--font-family-mono);
  }
}

@layer components {
  /* Header and Navigation */
  .site-header {
    height: var(--header-height);
    box-shadow: var(--header-shadow);
    background-color: var(--color-surface);
    border-bottom: var(--border-width) solid var(--color-border);
    @apply sticky top-0 z-50 backdrop-blur-sm bg-opacity-95;
  }

  .theme-toggle {
    background-color: transparent;
    color: var(--color-secondary);
    @apply inline-flex items-center justify-center p-2.5 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .theme-toggle:hover {
    background-color: var(--color-border);
    color: var(--color-primary);
  }

  .theme-toggle:focus {
    --tw-ring-color: var(--color-accent);
    --tw-ring-offset-color: var(--color-surface);
  }

  /* Cards */
  .card {
    border-radius: var(--card-radius);
    box-shadow: var(--card-shadow);
    background-color: var(--color-surface);
    border: var(--border-width) solid var(--color-border);
    @apply overflow-hidden;
  }

  .card-header {
    padding: var(--card-padding);
    border-bottom: var(--border-width) solid var(--color-border);
    background-color: var(--color-bg);
  }

  .card-body {
    padding: var(--card-padding);
  }

  .card-hover {
    @apply transition-all duration-200;
  }

  .card-hover:hover {
    background-color: var(--color-bg);
    box-shadow: 0 4px 6px -1px var(--color-shadow), 0 2px 4px -2px var(--color-shadow);
  }

  /* Code Blocks */
  .code-block {
    background-color: var(--color-bg);
    border: var(--border-width) solid var(--color-border);
    @apply relative rounded-lg overflow-hidden;
    font-family: var(--font-family-mono);
  }

  .code-block pre {
    @apply p-4 overflow-x-auto text-sm leading-relaxed;
    color: var(--color-text);
  }

  .code-block .copy-btn {
    background-color: var(--color-surface);
    color: var(--color-secondary);
    border: 1px solid var(--color-border);
    @apply absolute top-2 right-2 px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200 shadow-sm;
  }

  .code-block .copy-btn:hover {
    background-color: var(--color-bg);
  }

  /* Breadcrumbs */
  .breadcrumb {
    color: var(--color-secondary);
    @apply flex items-center space-x-2 text-sm font-medium;
  }

  .breadcrumb a {
    color: var(--color-secondary);
    @apply transition-colors duration-200 underline decoration-transparent hover:decoration-current underline-offset-4;
  }

  .breadcrumb a:hover {
    color: var(--color-accent);
  }

  /* Sidebar */
  .sidebar {
    border-left: var(--border-width) solid var(--color-border);
    @apply hidden lg:block lg:flex-shrink-0 lg:w-64 lg:pl-8 lg:ml-8;
  }

  .sidebar-nav {
    @apply space-y-1;
  }

  .sidebar-nav a {
    background-color: transparent;
    color: var(--color-secondary);
    border-left: 4px solid transparent;
    @apply block px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200;
  }

  .sidebar-nav a:hover {
    background-color: var(--color-bg);
    color: var(--color-primary);
    border-left-color: var(--color-accent);
  }

  .sidebar-nav a.active {
    background-color: var(--color-bg);
    color: var(--color-accent);
    border-left: 4px solid var(--color-accent);
    @apply font-semibold;
  }

  /* Badges */
  .badge {
    border: 1px solid var(--color-border);
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold;
  }

  .badge-deprecated {
    background-color: rgba(185, 28, 28, 0.1);
    color: rgb(185, 28, 28);
    border-color: rgba(185, 28, 28, 0.3);
  }

  .badge-streaming {
    background-color: rgba(29, 78, 216, 0.1);
    color: rgb(29, 78, 216);
    border-color: rgba(29, 78, 216, 0.3);
  }

  /* Links */
  .link-primary {
    color: var(--color-accent);
    @apply font-medium transition-colors duration-200 underline decoration-transparent hover:decoration-current underline-offset-2;
  }

  .link-primary:hover {
    color: var(--color-accent-hover);
  }

  /* Typography enhancements */
  .heading-1 {
    color: var(--color-primary);
    @apply text-4xl font-bold tracking-tight;
  }

  .heading-2 {
    color: var(--color-primary);
    @apply text-2xl font-bold tracking-tight;
  }

  .heading-3 {
    color: var(--color-primary);
    @apply text-xl font-semibold;
  }

  .text-secondary {
    color: var(--color-secondary);
  }

  .text-muted {
    color: var(--color-text-secondary);
  }
}
